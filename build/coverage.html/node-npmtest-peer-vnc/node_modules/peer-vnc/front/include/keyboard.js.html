<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-peer-vnc/node_modules/peer-vnc/front/include/keyboard.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-peer-vnc">npmtest-peer-vnc (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-peer-vnc/node_modules/peer-vnc/front/include/keyboard.js</span></h1>
    <h2>
        
        Statements: <span class="metric">8.76% <small>(24 / 274)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 218)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">2.56% <small>(1 / 39)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">8.89% <small>(24 / 270)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-peer-vnc/node_modules/peer-vnc/front/include/</a> &#187; keyboard.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545</td><td class="line-coverage"><span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">var kbdUtil = (function() {
    "use strict";
&nbsp;
<span class="fstat-no" title="function not covered" >    function substituteCodepoint(cp) {</span>
        // Any Unicode code points which do not have corresponding keysym entries
        // can be swapped out for another code point by adding them to this table
<span class="cstat-no" title="statement not covered" >        var substitutions = {</span>
            // {S,s} with comma below -&gt; {S,s} with cedilla
            0x218 : 0x15e,
            0x219 : 0x15f,
            // {T,t} with comma below -&gt; {T,t} with cedilla
            0x21a : 0x162,
            0x21b : 0x163
        };
&nbsp;
<span class="cstat-no" title="statement not covered" >        var sub = substitutions[cp];</span>
<span class="cstat-no" title="statement not covered" >        return sub ? sub : cp;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function isMac() {</span>
<span class="cstat-no" title="statement not covered" >        return navigator &amp;&amp; !!(/mac/i).exec(navigator.platform);</span>
    }
<span class="fstat-no" title="function not covered" >    function isWindows() {</span>
<span class="cstat-no" title="statement not covered" >        return navigator &amp;&amp; !!(/win/i).exec(navigator.platform);</span>
    }
<span class="fstat-no" title="function not covered" >    function isLinux() {</span>
<span class="cstat-no" title="statement not covered" >        return navigator &amp;&amp; !!(/linux/i).exec(navigator.platform);</span>
    }
&nbsp;
    // Return true if a modifier which is not the specified char modifier (and is not shift) is down
<span class="fstat-no" title="function not covered" >    function hasShortcutModifier(charModifier, currentModifiers) {</span>
<span class="cstat-no" title="statement not covered" >        var mods = {};</span>
<span class="cstat-no" title="statement not covered" >        for (var key in currentModifiers) {</span>
<span class="cstat-no" title="statement not covered" >            if (parseInt(key) !== XK_Shift_L) {</span>
<span class="cstat-no" title="statement not covered" >                mods[key] = currentModifiers[key];</span>
            }
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        var sum = 0;</span>
<span class="cstat-no" title="statement not covered" >        for (var k in currentModifiers) {</span>
<span class="cstat-no" title="statement not covered" >            if (mods[k]) {</span>
<span class="cstat-no" title="statement not covered" >                ++sum;</span>
            }
        }
<span class="cstat-no" title="statement not covered" >        if (hasCharModifier(charModifier, mods)) {</span>
<span class="cstat-no" title="statement not covered" >            return sum &gt; charModifier.length;</span>
        }
        else {
<span class="cstat-no" title="statement not covered" >            return sum &gt; 0;</span>
        }
    }
&nbsp;
    // Return true if the specified char modifier is currently down
<span class="fstat-no" title="function not covered" >    function hasCharModifier(charModifier, currentModifiers) {</span>
<span class="cstat-no" title="statement not covered" >        if (charModifier.length === 0) { <span class="cstat-no" title="statement not covered" >return false; </span>}</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        for (var i = 0; i &lt; charModifier.length; ++i) {</span>
<span class="cstat-no" title="statement not covered" >            if (!currentModifiers[charModifier[i]]) {</span>
<span class="cstat-no" title="statement not covered" >                return false;</span>
            }
        }
<span class="cstat-no" title="statement not covered" >        return true;</span>
    }
&nbsp;
    // Helper object tracking modifier key state
    // and generates fake key events to compensate if it gets out of sync
<span class="fstat-no" title="function not covered" >    function ModifierSync(charModifier) {</span>
<span class="cstat-no" title="statement not covered" >        if (!charModifier) {</span>
<span class="cstat-no" title="statement not covered" >            if (isMac()) {</span>
                // on Mac, Option (AKA Alt) is used as a char modifier
<span class="cstat-no" title="statement not covered" >                charModifier = [XK_Alt_L];</span>
            }
            else <span class="cstat-no" title="statement not covered" >if (isWindows()) {</span>
                // on Windows, Ctrl+Alt is used as a char modifier
<span class="cstat-no" title="statement not covered" >                charModifier = [XK_Alt_L, XK_Control_L];</span>
            }
            else <span class="cstat-no" title="statement not covered" >if (isLinux()) {</span>
                // on Linux, ISO Level 3 Shift (AltGr) is used as a char modifier
<span class="cstat-no" title="statement not covered" >                charModifier = [XK_ISO_Level3_Shift];</span>
            }
            else {
<span class="cstat-no" title="statement not covered" >                charModifier = [];</span>
            }
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        var state = {};</span>
<span class="cstat-no" title="statement not covered" >        state[XK_Control_L] = false;</span>
<span class="cstat-no" title="statement not covered" >        state[XK_Alt_L] = false;</span>
<span class="cstat-no" title="statement not covered" >        state[XK_ISO_Level3_Shift] = false;</span>
<span class="cstat-no" title="statement not covered" >        state[XK_Shift_L] = false;</span>
<span class="cstat-no" title="statement not covered" >        state[XK_Meta_L] = false;</span>
&nbsp;
<span class="fstat-no" title="function not covered" >        function sync(evt, keysym) {</span>
<span class="cstat-no" title="statement not covered" >            var result = [];</span>
<span class="fstat-no" title="function not covered" >            function syncKey(keysym) {</span>
<span class="cstat-no" title="statement not covered" >                return {keysym: keysyms.lookup(keysym), type: state[keysym] ? 'keydown' : 'keyup'};</span>
            }
&nbsp;
<span class="cstat-no" title="statement not covered" >            if (evt.ctrlKey !== undefined &amp;&amp;</span>
                evt.ctrlKey !== state[XK_Control_L] &amp;&amp; keysym !== XK_Control_L) {
<span class="cstat-no" title="statement not covered" >                state[XK_Control_L] = evt.ctrlKey;</span>
<span class="cstat-no" title="statement not covered" >                result.push(syncKey(XK_Control_L));</span>
            }
<span class="cstat-no" title="statement not covered" >            if (evt.altKey !== undefined &amp;&amp;</span>
                evt.altKey !== state[XK_Alt_L] &amp;&amp; keysym !== XK_Alt_L) {
<span class="cstat-no" title="statement not covered" >                state[XK_Alt_L] = evt.altKey;</span>
<span class="cstat-no" title="statement not covered" >                result.push(syncKey(XK_Alt_L));</span>
            }
<span class="cstat-no" title="statement not covered" >            if (evt.altGraphKey !== undefined &amp;&amp;</span>
                evt.altGraphKey !== state[XK_ISO_Level3_Shift] &amp;&amp; keysym !== XK_ISO_Level3_Shift) {
<span class="cstat-no" title="statement not covered" >                state[XK_ISO_Level3_Shift] = evt.altGraphKey;</span>
<span class="cstat-no" title="statement not covered" >                result.push(syncKey(XK_ISO_Level3_Shift));</span>
            }
<span class="cstat-no" title="statement not covered" >            if (evt.shiftKey !== undefined &amp;&amp;</span>
                evt.shiftKey !== state[XK_Shift_L] &amp;&amp; keysym !== XK_Shift_L) {
<span class="cstat-no" title="statement not covered" >                state[XK_Shift_L] = evt.shiftKey;</span>
<span class="cstat-no" title="statement not covered" >                result.push(syncKey(XK_Shift_L));</span>
            }
<span class="cstat-no" title="statement not covered" >            if (evt.metaKey !== undefined &amp;&amp;</span>
                evt.metaKey !== state[XK_Meta_L] &amp;&amp; keysym !== XK_Meta_L) {
<span class="cstat-no" title="statement not covered" >                state[XK_Meta_L] = evt.metaKey;</span>
<span class="cstat-no" title="statement not covered" >                result.push(syncKey(XK_Meta_L));</span>
            }
<span class="cstat-no" title="statement not covered" >            return result;</span>
        }
<span class="fstat-no" title="function not covered" >        function syncKeyEvent(evt, down) {</span>
<span class="cstat-no" title="statement not covered" >            var obj = getKeysym(evt);</span>
<span class="cstat-no" title="statement not covered" >            var keysym = obj ? obj.keysym : null;</span>
&nbsp;
            // first, apply the event itself, if relevant
<span class="cstat-no" title="statement not covered" >            if (keysym !== null &amp;&amp; state[keysym] !== undefined) {</span>
<span class="cstat-no" title="statement not covered" >                state[keysym] = down;</span>
            }
<span class="cstat-no" title="statement not covered" >            return sync(evt, keysym);</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        return {</span>
            // sync on the appropriate keyboard event
            keydown: <span class="fstat-no" title="function not covered" >function(evt) {</span> <span class="cstat-no" title="statement not covered" >return syncKeyEvent(evt, true);}</span>,
            keyup: <span class="fstat-no" title="function not covered" >function(evt) {</span> <span class="cstat-no" title="statement not covered" >return syncKeyEvent(evt, false);}</span>,
            // Call this with a non-keyboard event (such as mouse events) to use its modifier state to synchronize anyway
            syncAny: <span class="fstat-no" title="function not covered" >function(evt) {</span> <span class="cstat-no" title="statement not covered" >return sync(evt);}</span>,
&nbsp;
            // is a shortcut modifier down?
            hasShortcutModifier: <span class="fstat-no" title="function not covered" >function() {</span> <span class="cstat-no" title="statement not covered" >return hasShortcutModifier(charModifier, state); </span>},
            // if a char modifier is down, return the keys it consists of, otherwise return null
            activeCharModifier: <span class="fstat-no" title="function not covered" >function() {</span> <span class="cstat-no" title="statement not covered" >return hasCharModifier(charModifier, state) ? charModifier : null; </span>}
        };
    }
&nbsp;
    // Get a key ID from a keyboard event
    // May be a string or an integer depending on the available properties
<span class="fstat-no" title="function not covered" >    function getKey(evt){</span>
<span class="cstat-no" title="statement not covered" >        if ('keyCode' in evt &amp;&amp; 'key' in evt) {</span>
<span class="cstat-no" title="statement not covered" >            return evt.key + ':' + evt.keyCode;</span>
        }
        else <span class="cstat-no" title="statement not covered" >if ('keyCode' in evt) {</span>
<span class="cstat-no" title="statement not covered" >            return evt.keyCode;</span>
        }
        else {
<span class="cstat-no" title="statement not covered" >            return evt.key;</span>
        }
    }
&nbsp;
    // Get the most reliable keysym value we can get from a key event
    // if char/charCode is available, prefer those, otherwise fall back to key/keyCode/which
<span class="fstat-no" title="function not covered" >    function getKeysym(evt){</span>
<span class="cstat-no" title="statement not covered" >        var codepoint;</span>
<span class="cstat-no" title="statement not covered" >        if (evt.char &amp;&amp; evt.char.length === 1) {</span>
<span class="cstat-no" title="statement not covered" >            codepoint = evt.char.charCodeAt();</span>
        }
        else <span class="cstat-no" title="statement not covered" >if (evt.charCode) {</span>
<span class="cstat-no" title="statement not covered" >            codepoint = evt.charCode;</span>
        }
        else <span class="cstat-no" title="statement not covered" >if (evt.keyCode &amp;&amp; evt.type === 'keypress') {</span>
            // IE10 stores the char code as keyCode, and has no other useful properties
<span class="cstat-no" title="statement not covered" >            codepoint = evt.keyCode;</span>
        }
<span class="cstat-no" title="statement not covered" >        if (codepoint) {</span>
<span class="cstat-no" title="statement not covered" >            var res = keysyms.fromUnicode(substituteCodepoint(codepoint));</span>
<span class="cstat-no" title="statement not covered" >            if (res) {</span>
<span class="cstat-no" title="statement not covered" >                return res;</span>
            }
        }
        // we could check evt.key here.
        // Legal values are defined in http://www.w3.org/TR/DOM-Level-3-Events/#key-values-list,
        // so we "just" need to map them to keysym, but AFAIK this is only available in IE10, which also provides evt.key
        // so we don't *need* it yet
<span class="cstat-no" title="statement not covered" >        if (evt.keyCode) {</span>
<span class="cstat-no" title="statement not covered" >            return keysyms.lookup(keysymFromKeyCode(evt.keyCode, evt.shiftKey));</span>
        }
<span class="cstat-no" title="statement not covered" >        if (evt.which) {</span>
<span class="cstat-no" title="statement not covered" >            return keysyms.lookup(keysymFromKeyCode(evt.which, evt.shiftKey));</span>
        }
<span class="cstat-no" title="statement not covered" >        return null;</span>
    }
&nbsp;
    // Given a keycode, try to predict which keysym it might be.
    // If the keycode is unknown, null is returned.
<span class="fstat-no" title="function not covered" >    function keysymFromKeyCode(keycode, shiftPressed) {</span>
<span class="cstat-no" title="statement not covered" >        if (typeof(keycode) !== 'number') {</span>
<span class="cstat-no" title="statement not covered" >            return null;</span>
        }
        // won't be accurate for azerty
<span class="cstat-no" title="statement not covered" >        if (keycode &gt;= 0x30 &amp;&amp; keycode &lt;= 0x39) {</span>
<span class="cstat-no" title="statement not covered" >            return keycode; </span>// digit
        }
<span class="cstat-no" title="statement not covered" >        if (keycode &gt;= 0x41 &amp;&amp; keycode &lt;= 0x5a) {</span>
            // remap to lowercase unless shift is down
<span class="cstat-no" title="statement not covered" >            return shiftPressed ? keycode : keycode + 32; </span>// A-Z
        }
<span class="cstat-no" title="statement not covered" >        if (keycode &gt;= 0x60 &amp;&amp; keycode &lt;= 0x69) {</span>
<span class="cstat-no" title="statement not covered" >            return XK_KP_0 + (keycode - 0x60); </span>// numpad 0-9
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        switch(keycode) {</span>
            case 0x20: <span class="cstat-no" title="statement not covered" >return XK_space;</span>
            case 0x6a: <span class="cstat-no" title="statement not covered" >return XK_KP_Multiply;</span>
            case 0x6b: <span class="cstat-no" title="statement not covered" >return XK_KP_Add;</span>
            case 0x6c: <span class="cstat-no" title="statement not covered" >return XK_KP_Separator;</span>
            case 0x6d: <span class="cstat-no" title="statement not covered" >return XK_KP_Subtract;</span>
            case 0x6e: <span class="cstat-no" title="statement not covered" >return XK_KP_Decimal;</span>
            case 0x6f: <span class="cstat-no" title="statement not covered" >return XK_KP_Divide;</span>
            case 0xbb: <span class="cstat-no" title="statement not covered" >return XK_plus;</span>
            case 0xbc: <span class="cstat-no" title="statement not covered" >return XK_comma;</span>
            case 0xbd: <span class="cstat-no" title="statement not covered" >return XK_minus;</span>
            case 0xbe: <span class="cstat-no" title="statement not covered" >return XK_period;</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        return nonCharacterKey({keyCode: keycode});</span>
    }
&nbsp;
    // if the key is a known non-character key (any key which doesn't generate character data)
    // return its keysym value. Otherwise return null
<span class="fstat-no" title="function not covered" >    function nonCharacterKey(evt) {</span>
        // evt.key not implemented yet
<span class="cstat-no" title="statement not covered" >        if (!evt.keyCode) { <span class="cstat-no" title="statement not covered" >return null; </span>}</span>
<span class="cstat-no" title="statement not covered" >        var keycode = evt.keyCode;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (keycode &gt;= 0x70 &amp;&amp; keycode &lt;= 0x87) {</span>
<span class="cstat-no" title="statement not covered" >            return XK_F1 + keycode - 0x70; </span>// F1-F24
        }
<span class="cstat-no" title="statement not covered" >        switch (keycode) {</span>
&nbsp;
            case 8 : <span class="cstat-no" title="statement not covered" >return XK_BackSpace;</span>
            case 13 : <span class="cstat-no" title="statement not covered" >return XK_Return;</span>
&nbsp;
            case 9 : <span class="cstat-no" title="statement not covered" >return XK_Tab;</span>
&nbsp;
            case 27 : <span class="cstat-no" title="statement not covered" >return XK_Escape;</span>
            case 46 : <span class="cstat-no" title="statement not covered" >return XK_Delete;</span>
&nbsp;
            case 36 : <span class="cstat-no" title="statement not covered" >return XK_Home;</span>
            case 35 : <span class="cstat-no" title="statement not covered" >return XK_End;</span>
            case 33 : <span class="cstat-no" title="statement not covered" >return XK_Page_Up;</span>
            case 34 : <span class="cstat-no" title="statement not covered" >return XK_Page_Down;</span>
            case 45 : <span class="cstat-no" title="statement not covered" >return XK_Insert;</span>
&nbsp;
            case 37 : <span class="cstat-no" title="statement not covered" >return XK_Left;</span>
            case 38 : <span class="cstat-no" title="statement not covered" >return XK_Up;</span>
            case 39 : <span class="cstat-no" title="statement not covered" >return XK_Right;</span>
            case 40 : <span class="cstat-no" title="statement not covered" >return XK_Down;</span>
&nbsp;
            case 16 : <span class="cstat-no" title="statement not covered" >return XK_Shift_L;</span>
            case 17 : <span class="cstat-no" title="statement not covered" >return XK_Control_L;</span>
            case 18 : <span class="cstat-no" title="statement not covered" >return XK_Alt_L; </span>// also: Option-key on Mac
&nbsp;
            case 224 : <span class="cstat-no" title="statement not covered" >return XK_Meta_L;</span>
            case 225 : <span class="cstat-no" title="statement not covered" >return XK_ISO_Level3_Shift; </span>// AltGr
            case 91 : <span class="cstat-no" title="statement not covered" >return XK_Super_L; </span>// also: Windows-key
            case 92 : <span class="cstat-no" title="statement not covered" >return XK_Super_R; </span>// also: Windows-key
            case 93 : <span class="cstat-no" title="statement not covered" >return XK_Menu; </span>// also: Windows-Menu, Command on Mac
            default: <span class="cstat-no" title="statement not covered" >return null;</span>
        }
    }
    return {
        hasShortcutModifier : hasShortcutModifier,
        hasCharModifier : hasCharModifier,
        ModifierSync : ModifierSync,
        getKey : getKey,
        getKeysym : getKeysym,
        keysymFromKeyCode : keysymFromKeyCode,
        nonCharacterKey : nonCharacterKey,
        substituteCodepoint : substituteCodepoint
    };
})();
&nbsp;
// Takes a DOM keyboard event and:
// - determines which keysym it represents
// - determines a keyId  identifying the key that was pressed (corresponding to the key/keyCode properties on the DOM event)
// - synthesizes events to synchronize modifier key state between which modifiers are actually down, and which we thought were down
// - marks each event with an 'escape' property if a modifier was down which should be "escaped"
// - generates a "stall" event in cases where it might be necessary to wait and see if a keypress event follows a keydown
// This information is collected into an object which is passed to the next() function. (one call per event)
<span class="fstat-no" title="function not covered" >function KeyEventDecoder(modifierState, next) {</span>
    "use strict";
<span class="fstat-no" title="function not covered" >    function sendAll(evts) {</span>
<span class="cstat-no" title="statement not covered" >        for (var i = 0; i &lt; evts.length; ++i) {</span>
<span class="cstat-no" title="statement not covered" >            next(evts[i]);</span>
        }
    }
<span class="fstat-no" title="function not covered" >    function process(evt, type) {</span>
<span class="cstat-no" title="statement not covered" >        var result = {type: type};</span>
<span class="cstat-no" title="statement not covered" >        var keyId = kbdUtil.getKey(evt);</span>
<span class="cstat-no" title="statement not covered" >        if (keyId) {</span>
<span class="cstat-no" title="statement not covered" >            result.keyId = keyId;</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        var keysym = kbdUtil.getKeysym(evt);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        var hasModifier = modifierState.hasShortcutModifier() || !!modifierState.activeCharModifier();</span>
        // Is this a case where we have to decide on the keysym right away, rather than waiting for the keypress?
        // "special" keys like enter, tab or backspace don't send keypress events,
        // and some browsers don't send keypresses at all if a modifier is down
<span class="cstat-no" title="statement not covered" >        if (keysym &amp;&amp; (type !== 'keydown' || kbdUtil.nonCharacterKey(evt) || hasModifier)) {</span>
<span class="cstat-no" title="statement not covered" >            result.keysym = keysym;</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        var isShift = evt.keyCode === 0x10 || evt.key === 'Shift';</span>
&nbsp;
        // Should we prevent the browser from handling the event?
        // Doing so on a keydown (in most browsers) prevents keypress from being generated
        // so only do that if we have to.
<span class="cstat-no" title="statement not covered" >        var suppress = !isShift &amp;&amp; (type !== 'keydown' || modifierState.hasShortcutModifier() || !!kbdUtil.nonCharacterKey(evt));</span>
&nbsp;
        // If a char modifier is down on a keydown, we need to insert a stall,
        // so VerifyCharModifier knows to wait and see if a keypress is comnig
<span class="cstat-no" title="statement not covered" >        var stall = type === 'keydown' &amp;&amp; modifierState.activeCharModifier() &amp;&amp; !kbdUtil.nonCharacterKey(evt);</span>
&nbsp;
        // if a char modifier is pressed, get the keys it consists of (on Windows, AltGr is equivalent to Ctrl+Alt)
<span class="cstat-no" title="statement not covered" >        var active = modifierState.activeCharModifier();</span>
&nbsp;
        // If we have a char modifier down, and we're able to determine a keysym reliably
        // then (a) we know to treat the modifier as a char modifier,
        // and (b) we'll have to "escape" the modifier to undo the modifier when sending the char.
<span class="cstat-no" title="statement not covered" >        if (active &amp;&amp; keysym) {</span>
<span class="cstat-no" title="statement not covered" >            var isCharModifier = false;</span>
<span class="cstat-no" title="statement not covered" >            for (var i  = 0; i &lt; active.length; ++i) {</span>
<span class="cstat-no" title="statement not covered" >                if (active[i] === keysym.keysym) {</span>
<span class="cstat-no" title="statement not covered" >                    isCharModifier = true;</span>
                }
            }
<span class="cstat-no" title="statement not covered" >            if (type === 'keypress' &amp;&amp; !isCharModifier) {</span>
<span class="cstat-no" title="statement not covered" >                result.escape = modifierState.activeCharModifier();</span>
            }
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        if (stall) {</span>
            // insert a fake "stall" event
<span class="cstat-no" title="statement not covered" >            next({type: 'stall'});</span>
        }
<span class="cstat-no" title="statement not covered" >        next(result);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        return suppress;</span>
    }
&nbsp;
<span class="cstat-no" title="statement not covered" >    return {</span>
        keydown: <span class="fstat-no" title="function not covered" >function(evt) {</span>
<span class="cstat-no" title="statement not covered" >            sendAll(modifierState.keydown(evt));</span>
<span class="cstat-no" title="statement not covered" >            return process(evt, 'keydown');</span>
        },
        keypress: <span class="fstat-no" title="function not covered" >function(evt) {</span>
<span class="cstat-no" title="statement not covered" >            return process(evt, 'keypress');</span>
        },
        keyup: <span class="fstat-no" title="function not covered" >function(evt) {</span>
<span class="cstat-no" title="statement not covered" >            sendAll(modifierState.keyup(evt));</span>
<span class="cstat-no" title="statement not covered" >            return process(evt, 'keyup');</span>
        },
        syncModifiers: <span class="fstat-no" title="function not covered" >function(evt) {</span>
<span class="cstat-no" title="statement not covered" >            sendAll(modifierState.syncAny(evt));</span>
        },
        releaseAll: <span class="fstat-no" title="function not covered" >function() {</span> <span class="cstat-no" title="statement not covered" >next({type: 'releaseall'}); </span>}
    };
}
&nbsp;
// Combines keydown and keypress events where necessary to handle char modifiers.
// On some OS'es, a char modifier is sometimes used as a shortcut modifier.
// For example, on Windows, AltGr is synonymous with Ctrl-Alt. On a Danish keyboard layout, AltGr-2 yields a @, but Ctrl-Alt-D does nothing
// so when used with the '2' key, Ctrl-Alt counts as a char modifier (and should be escaped), but when used with 'D', it does not.
// The only way we can distinguish these cases is to wait and see if a keypress event arrives
// When we receive a "stall" event, wait a few ms before processing the next keydown. If a keypress has also arrived, merge the two
<span class="fstat-no" title="function not covered" >function VerifyCharModifier(next) {</span>
    "use strict";
<span class="cstat-no" title="statement not covered" >    var queue = [];</span>
<span class="cstat-no" title="statement not covered" >    var timer = null;</span>
<span class="fstat-no" title="function not covered" >    function process() {</span>
<span class="cstat-no" title="statement not covered" >        if (timer) {</span>
<span class="cstat-no" title="statement not covered" >            return;</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        var delayProcess = <span class="fstat-no" title="function not covered" >function () {</span></span>
<span class="cstat-no" title="statement not covered" >            clearTimeout(timer);</span>
<span class="cstat-no" title="statement not covered" >            timer = null;</span>
<span class="cstat-no" title="statement not covered" >            process();</span>
        };
&nbsp;
<span class="cstat-no" title="statement not covered" >        while (queue.length !== 0) {</span>
<span class="cstat-no" title="statement not covered" >            var cur = queue[0];</span>
<span class="cstat-no" title="statement not covered" >            queue = queue.splice(1);</span>
<span class="cstat-no" title="statement not covered" >            switch (cur.type) {</span>
            case 'stall':
                // insert a delay before processing available events.
                /* jshint loopfunc: true */
<span class="cstat-no" title="statement not covered" >                timer = setTimeout(delayProcess, 5);</span>
                /* jshint loopfunc: false */
<span class="cstat-no" title="statement not covered" >                return;</span>
            case 'keydown':
                // is the next element a keypress? Then we should merge the two
<span class="cstat-no" title="statement not covered" >                if (queue.length !== 0 &amp;&amp; queue[0].type === 'keypress') {</span>
                    // Firefox sends keypress even when no char is generated.
                    // so, if keypress keysym is the same as we'd have guessed from keydown,
                    // the modifier didn't have any effect, and should not be escaped
<span class="cstat-no" title="statement not covered" >                    if (queue[0].escape &amp;&amp; (!cur.keysym || cur.keysym.keysym !== queue[0].keysym.keysym)) {</span>
<span class="cstat-no" title="statement not covered" >                        cur.escape = queue[0].escape;</span>
                    }
<span class="cstat-no" title="statement not covered" >                    cur.keysym = queue[0].keysym;</span>
<span class="cstat-no" title="statement not covered" >                    queue = queue.splice(1);</span>
                }
<span class="cstat-no" title="statement not covered" >                break;</span>
            }
&nbsp;
            // swallow stall events, and pass all others to the next stage
<span class="cstat-no" title="statement not covered" >            if (cur.type !== 'stall') {</span>
<span class="cstat-no" title="statement not covered" >                next(cur);</span>
            }
        }
    }
<span class="cstat-no" title="statement not covered" >    return <span class="fstat-no" title="function not covered" >function(evt) {</span></span>
<span class="cstat-no" title="statement not covered" >        queue.push(evt);</span>
<span class="cstat-no" title="statement not covered" >        process();</span>
    };
}
&nbsp;
// Keeps track of which keys we (and the server) believe are down
// When a keyup is received, match it against this list, to determine the corresponding keysym(s)
// in some cases, a single key may produce multiple keysyms, so the corresponding keyup event must release all of these chars
// key repeat events should be merged into a single entry.
// Because we can't always identify which entry a keydown or keyup event corresponds to, we sometimes have to guess
<span class="fstat-no" title="function not covered" >function TrackKeyState(next) {</span>
    "use strict";
<span class="cstat-no" title="statement not covered" >    var state = [];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    return <span class="fstat-no" title="function not covered" >function (evt) {</span></span>
<span class="cstat-no" title="statement not covered" >        var last = state.length !== 0 ? state[state.length-1] : null;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        switch (evt.type) {</span>
        case 'keydown':
            // insert a new entry if last seen key was different.
<span class="cstat-no" title="statement not covered" >            if (!last || !evt.keyId || last.keyId !== evt.keyId) {</span>
<span class="cstat-no" title="statement not covered" >                last = {keyId: evt.keyId, keysyms: {}};</span>
<span class="cstat-no" title="statement not covered" >                state.push(last);</span>
            }
<span class="cstat-no" title="statement not covered" >            if (evt.keysym) {</span>
                // make sure last event contains this keysym (a single "logical" keyevent
                // can cause multiple key events to be sent to the VNC server)
<span class="cstat-no" title="statement not covered" >                last.keysyms[evt.keysym.keysym] = evt.keysym;</span>
<span class="cstat-no" title="statement not covered" >                last.ignoreKeyPress = true;</span>
<span class="cstat-no" title="statement not covered" >                next(evt);</span>
            }
<span class="cstat-no" title="statement not covered" >            break;</span>
        case 'keypress':
<span class="cstat-no" title="statement not covered" >            if (!last) {</span>
<span class="cstat-no" title="statement not covered" >                last = {keyId: evt.keyId, keysyms: {}};</span>
<span class="cstat-no" title="statement not covered" >                state.push(last);</span>
            }
<span class="cstat-no" title="statement not covered" >            if (!evt.keysym) {</span>
<span class="cstat-no" title="statement not covered" >                console.log('keypress with no keysym:', evt);</span>
            }
&nbsp;
            // If we didn't expect a keypress, and already sent a keydown to the VNC server
            // based on the keydown, make sure to skip this event.
<span class="cstat-no" title="statement not covered" >            if (evt.keysym &amp;&amp; !last.ignoreKeyPress) {</span>
<span class="cstat-no" title="statement not covered" >                last.keysyms[evt.keysym.keysym] = evt.keysym;</span>
<span class="cstat-no" title="statement not covered" >                evt.type = 'keydown';</span>
<span class="cstat-no" title="statement not covered" >                next(evt);</span>
            }
<span class="cstat-no" title="statement not covered" >            break;</span>
        case 'keyup':
<span class="cstat-no" title="statement not covered" >            if (state.length === 0) {</span>
<span class="cstat-no" title="statement not covered" >                return;</span>
            }
<span class="cstat-no" title="statement not covered" >            var idx = null;</span>
            // do we have a matching key tracked as being down?
<span class="cstat-no" title="statement not covered" >            for (var i = 0; i !== state.length; ++i) {</span>
<span class="cstat-no" title="statement not covered" >                if (state[i].keyId === evt.keyId) {</span>
<span class="cstat-no" title="statement not covered" >                    idx = i;</span>
<span class="cstat-no" title="statement not covered" >                    break;</span>
                }
            }
            // if we couldn't find a match (it happens), assume it was the last key pressed
<span class="cstat-no" title="statement not covered" >            if (idx === null) {</span>
<span class="cstat-no" title="statement not covered" >                idx = state.length - 1;</span>
            }
&nbsp;
<span class="cstat-no" title="statement not covered" >            var item = state.splice(idx, 1)[0];</span>
            // for each keysym tracked by this key entry, clone the current event and override the keysym
<span class="cstat-no" title="statement not covered" >            var clone = (<span class="fstat-no" title="function not covered" >function(){</span></span>
<span class="fstat-no" title="function not covered" >                function Clone(){</span>}
<span class="cstat-no" title="statement not covered" >                return <span class="fstat-no" title="function not covered" >function (obj) {</span> <span class="cstat-no" title="statement not covered" >Clone.prototype=obj; <span class="cstat-no" title="statement not covered" ></span>return new Clone(); </span>};</span>
            }());
<span class="cstat-no" title="statement not covered" >            for (var key in item.keysyms) {</span>
<span class="cstat-no" title="statement not covered" >                var out = clone(evt);</span>
<span class="cstat-no" title="statement not covered" >                out.keysym = item.keysyms[key];</span>
<span class="cstat-no" title="statement not covered" >                next(out);</span>
            }
<span class="cstat-no" title="statement not covered" >            break;</span>
        case 'releaseall':
            /* jshint shadow: true */
<span class="cstat-no" title="statement not covered" >            for (var i = 0; i &lt; state.length; ++i) {</span>
<span class="cstat-no" title="statement not covered" >                for (var key in state[i].keysyms) {</span>
<span class="cstat-no" title="statement not covered" >                    var keysym = state[i].keysyms[key];</span>
<span class="cstat-no" title="statement not covered" >                    next({keyId: 0, keysym: keysym, type: 'keyup'});</span>
                }
            }
            /* jshint shadow: false */
<span class="cstat-no" title="statement not covered" >            state = [];</span>
        }
    };
}
&nbsp;
// Handles "escaping" of modifiers: if a char modifier is used to produce a keysym (such as AltGr-2 to generate an @),
// then the modifier must be "undone" before sending the @, and "redone" afterwards.
<span class="fstat-no" title="function not covered" >function EscapeModifiers(next) {</span>
    "use strict";
<span class="cstat-no" title="statement not covered" >    return <span class="fstat-no" title="function not covered" >function(evt) {</span></span>
<span class="cstat-no" title="statement not covered" >        if (evt.type !== 'keydown' || evt.escape === undefined) {</span>
<span class="cstat-no" title="statement not covered" >            next(evt);</span>
<span class="cstat-no" title="statement not covered" >            return;</span>
        }
        // undo modifiers
<span class="cstat-no" title="statement not covered" >        for (var i = 0; i &lt; evt.escape.length; ++i) {</span>
<span class="cstat-no" title="statement not covered" >            next({type: 'keyup', keyId: 0, keysym: keysyms.lookup(evt.escape[i])});</span>
        }
        // send the character event
<span class="cstat-no" title="statement not covered" >        next(evt);</span>
        // redo modifiers
        /* jshint shadow: true */
<span class="cstat-no" title="statement not covered" >        for (var i = 0; i &lt; evt.escape.length; ++i) {</span>
<span class="cstat-no" title="statement not covered" >            next({type: 'keydown', keyId: 0, keysym: keysyms.lookup(evt.escape[i])});</span>
        }
        /* jshint shadow: false */
    };
}
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Tue Apr 25 2017 21:20:47 GMT+0000 (UTC)</div>
</div>
</body>
</html>
